# [HTTP 캐싱](https://roadmap.sh/guides/http-caching#introduction)

HTTP 캐싱은 웹 자원을 클라이언트, 네트워크, 혹은 서버 단에서 저장하며 재방문 시 더 빠르게 지원을 로드할 수 있게 하는 기술이다.  
이 과정은 네트워크 지연을 시간을 줄이고, 서버의 부하를 감소하는 효과가 있다.

- 클라이언트는 브라우저이거나 서버에 일부 리소스를 요청하는 으용 프로그램이다.
- Orgin Server는 클라이언트가 요구하는 모든 콘텐츠를 담고 있으며 클라이언트의 요청을 이행하는 역할을 한다.
- 오래된 콘텐츠는 캐시 되었다가 만료된 콘텐츠이다.
- 새로운 콘텐츠는 아직 만료되지 않은 캐시에 있는 콘텐츠이다.
- 캐시 검증은 캐시된 콘텐츠의 유효성을 확인하고 만료 시점에 맞춰 업데이트하기 위해 서버에 연결하는 과정이다.
- 캐시 무효화는 캐시에 있는 오래된 콘텐츠를 제거하는 프로세스이다.

## 캐싱의 위치
1. 브라우저 캐시
- 사용자의 컴퓨터나 모바일 장치의 로컬 메모리에 저장되는 캐시
- 사용자가 웹사이트에 방문할 때 브라우저는 자동으로 자주 사용되는 자원을 저장한다. 
2. 프록시 캐시
- 클라이언트와 서버 사이에 위치하는 중간 서버이며 프록시 캐시는 이 프록시 서버에서 운용된다.
- 클라이언트 요청 => 서버 => 클라이언트
- 많은 사용자들이 같은 웹자원을 요청할 경우 이를 캐시에 저장해 두었다가 요청이 있을 때 제공한다.
- 이는 좀 더 광범위한 수준의 캐시이다.
3. 역방향 프록시 캐시
- 원 서버 바로 앞에 위치하며 모든 들어오는 요청을 처리한다.
- 웹 서버와 클라이언트 사이에서 인터넷 트래픽을 관리하고, 캐시된 콘텐츠를 제공한다.
- CDN(콘텐츠 전송 네트워크)와 같은 서비스가 대표적인 역방향 프록시 캐시이다.

#### 프록시 캐시 vs 역방향 프록시 캐시
- 프록시 캐시는 사용자의 인터넷 사용 경험을 최적화하는 것을 목표로하며, / 역방향 프록시는웹 서버의 효율과 보안을 강화한다
- 프록시 캐시 : 클라이언트 -> 서버 / 역방향 프록시 캐시 : 서버 -> 클라이언트
- 역방향 프록시 캐시는 서버에서 구형되기 떄문에 제어가 가능하지만 브라우저나 프록시 캐시는 피하거나 제어할 수 없다  

-> 이게 무슨소리냐!!!! 역방향 프록시 캐시는 웹 서버 관리자가 캐시된 데이터를 어떻게 저장하고 제공할지에 대한 전체적인 제어가 가능하다.  
반면 브라우저 캐시나 일반 프록시 캐시는 클라이언트측에 좀 더 가까이 있기 떄문에 클라이언트 측 또는 독집적인 프록시 서버에 의해 관리되어 관리자가 직접적인 제어가 어렵다.  
쉽게 설명하면 개발자게 역방향 프록시가 개발자에 좀 더 가깝다고 생각하면 된다.

## 캐싱 헤더; 웹 캐시를 어떻게 제어할까
캐싱 헤더 : HTTP 응답과 요청을 통해 캐시 동작을 제어하는 데 사용되는 HTTP 헤더  
웹 서버, 클라이언트, 프록시 서버 간의 캐시 방식을 지정한다.  
캐시된 데이터의 관리 및 유효성 검사에 핵심적인 역할을 한다.

### 주요 캐싱 헤더
1. Cache-Control
- 가장 중요한 캐싱 헤더 중 하나이다.
- 데이터의 캐시 가능 여부, 캐시 지속 시간, 재검증 필요 여부등을 명시한다.

  - Cache-Control: no-cache : 캐시를 사용하기 전에 원 서버에 재검증을 요청합니다.
  - Cache-Control: no-store : 어떠한 데이터도 캐시하지 않아야 함을 나타냅니다.
  - Cache-Control: public : 응답이 공개적으로 캐시될 수 있음을 나타냅니다.
  - Cache-Control: private : 응답이 개인적으로만 캐시될 수 있음을 나타냅니다.
  - Cache-Control: max-age=3600 : 응답이 3600초 동안 유효하다는 것을 나타냅니다.

2. Expires
- 응답이 더이상 신선하지 않다고 간주되는 경우 정확한 날짜/시간을 명시한다.
- Cache-Control의 max-age 지시어와 함께 사용되어 캐시의 만료 시간을 지정한다.

3. Last-Modified
- 리소스가 마지막으로 변경된 날짜와 시간을 나타낸다.
- 주로 If-Modified-Since 요청 헤더와 함께 사용된다.
- 리소스의 마지막 수정 시간 이후에 변경되지 않았다면 304 상태 코드(변경 없음)와 함께 응답을 반환한다.

4. ETag
- 리소스의 특정 버전을 고유하게 식별하는 식별자이다.
- 리소스가 변경될 때마다 갱신되며, If-None-Match 요청 헤더와 함께 사용되어 캐시된 사본의 유효성을 검사한다.

5. Pragma
- HTTP/1.0 호환성을 위해 사용된다.
- 주로 캐시 제어에  no-cache 지시어를 명시할 때 사용된다.
-  HTTP/1.1에서는 Cache-Control 헤더가 대신 사용된다.


# ???
- HTTP/1.0 : 웹 서버와 클라이언트 간에 문서를 전송하기 위한 프로토콜. 